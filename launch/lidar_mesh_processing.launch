<?xml version="1.0"?>
<launch>
  <!-- Main launch file for LiDAR mesh processing -->

  <!-- Arguments -->
  <arg name="scan_topic" default="/hsrb/base_scan" />
  <arg name="enable_visualization" default="true" />
  <arg name="enable_hough" default="true" />

  <!-- LiDAR Activator Node -->
  <node name="lidar_activator" pkg="csc752-final-project" type="lidar_activator.py" output="screen">
    <param name="scan_topic" value="$(arg scan_topic)" />
    <param name="min_range" value="0.1" />
    <param name="max_range" value="30.0" />
  </node>

  <!-- Point Cloud to Mesh Converter -->
  <node name="point_cloud_to_mesh" pkg="csc752-final-project" type="point_cloud_to_mesh.py" output="screen">
    <param name="voxel_size" value="0.05" />
    <param name="max_distance" value="5.0" />
    <param name="mesh_alpha" value="0.7" />
  </node>

  <!-- Hough Transform Processor (optional) -->
  <node if="$(arg enable_hough)" name="hough_transform_processor" pkg="csc752-final-project" type="hough_transform_processor.py" output="screen">
    <param name="grid_resolution" value="0.05" />
    <param name="grid_size" value="200" />
    <param name="hough_threshold" value="50" />
    <param name="min_line_length" value="0.5" />
    <param name="max_line_gap" value="0.3" />
  </node>

  <!-- Launch RViz for visualization (optional) -->
  <node if="$(arg enable_visualization)" name="rviz" pkg="rviz" type="rviz" args="-d $(find csc752-final-project)/rviz/lidar_mesh_visualization.rviz" />

</launch>
